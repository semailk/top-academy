<?php

namespace Database\Seeders;

use App\Models\Category;
use App\Models\Role;
use App\Models\User;
use App\Models\Post;
use Illuminate\Database\Eloquent\Builder;
use Illuminate\Database\Seeder;
use Illuminate\Support\Collection;
use Illuminate\Support\Facades\Hash;
use Carbon\Carbon;

class TestDataSeeder extends Seeder
{
    public function run()
    {
        $roleNames = [
            'user',
            'admin'
        ];
        $users = [
            [
                'username' => 'alexey',
                'email' => 'alexey@example.com',
                'password' => Hash::make('111111')
            ],
            [
                'username' => 'maria',
                'email' => 'maria@example.com',
                'password' => Hash::make('111111')
            ],
            [
                'username' => 'sergey',
                'email' => 'sergey@example.com',
                'password' => Hash::make('111111')
            ],
            [
                'username' => 'olga',
                'email' => 'olga@example.com',
                'password' => Hash::make('111111')
            ],
            [
                'username' => 'admin',
                'email' => 'admin@example.com',
                'password' => Hash::make('111111')
            ],
        ];

        foreach ($roleNames as $name) {
            Role::query()->create([
                'name' => $name
            ]);
        }

        foreach ($users as $user) {
            if ($user['username'] === 'admin') {
                User::query()->firstOrCreate([ 'email' => $user['email'],],[

                    'username' => $user['username'],
                    'password' => $user['password'],
                    'role_id' => Role::query()->where('name', 'admin')->first()?->id
                ]);
            } else {
                User::query()->firstOrCreate(
                    [ 'email' => $user['email']]
                    ,['username' => $user['username'],
                    'password' => $user['password'],
                    'role_id' => Role::query()->where('name', 'user')->first()?->id
                ]);
            }
        }


        // Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ Ğ¿Ğ¾ÑÑ‚Ğ¾Ğ²
        $postMessages = [
            'ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ²ÑĞµĞ¼! Ğ­Ñ‚Ğ¾ Ğ¼Ğ¾Ğ¹ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ Ğ¿Ğ¾ÑÑ‚ Ğ² ÑÑ‚Ğ¾Ğ¼ Ğ±Ğ»Ğ¾Ğ³Ğµ.',
            'Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ Ğ·Ğ°Ğ¼ĞµÑ‡Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ´Ğ»Ñ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ Ğ¿Ğ¾ÑÑ‚Ğ°!',
            'Ğ”ĞµĞ»Ğ¸Ñ‚ĞµÑÑŒ ÑĞ²Ğ¾Ğ¸Ğ¼Ğ¸ Ğ¼Ñ‹ÑĞ»ÑĞ¼Ğ¸ Ğ¸ Ğ¸Ğ´ĞµÑĞ¼Ğ¸ Ğ² ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸ÑÑ….',
            'ĞšĞ°Ğº Ğ²Ğ°Ğ¼ Ğ½Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑÑ ÑÑ‚Ğ¾Ñ‚ Ğ±Ğ»Ğ¾Ğ³-Ğ¿Ñ€Ğ¾ĞµĞºÑ‚?',
            'ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ - ÑÑ‚Ğ¾ Ğ¸ÑĞºÑƒÑÑÑ‚Ğ²Ğ¾ Ğ¸ Ğ½Ğ°ÑƒĞºĞ° Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾.',
            'Laravel Ğ´ĞµĞ»Ğ°ĞµÑ‚ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ Ğ²ĞµĞ±-Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹ ÑƒĞ´Ğ¾Ğ²Ğ¾Ğ»ÑŒÑÑ‚Ğ²Ğ¸ĞµĞ¼!',
            'ĞĞµ Ğ·Ğ°Ğ±Ñ‹Ğ²Ğ°Ğ¹Ñ‚Ğµ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ±ÑĞºĞ°Ğ¿Ñ‹ Ğ²Ğ°ÑˆĞ¸Ñ… Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¾Ğ².',
            'Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ - Ğ²Ğ°Ğ¶Ğ½Ğ°Ñ Ñ‡Ğ°ÑÑ‚ÑŒ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸.',
            'Ğ˜Ğ·ÑƒÑ‡Ğ°Ğ¹Ñ‚Ğµ Ğ½Ğ¾Ğ²Ñ‹Ğµ Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ.',
            'ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ´Ğ° - ĞºĞ»ÑÑ‡ Ğº Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸.',
            'Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ğ² ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğµ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞµĞ¹ ĞºĞ¾Ğ¼Ğ¼ÑƒĞ½Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸.',
            'ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ñ‹Ğ¹ Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´ Ğ¼ĞµĞ½ÑĞµÑ‚ Ğ¼Ğ¸Ñ€.',
            'Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ Ğ²ĞµĞ±-Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ²Ğ°Ğ¶Ğ½Ğ°.',
            'ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¹ Ğ¾Ğ¿Ñ‹Ñ‚ - Ğ½Ğ° Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ Ğ¼ĞµÑÑ‚Ğµ.',
            'ĞœĞ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ ÑĞ°Ğ¹Ñ‚Ğ° Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ° Ğ² 2024 Ğ³Ğ¾Ğ´Ñƒ.',
            'Ğ˜Ğ˜ Ğ¼ĞµĞ½ÑĞµÑ‚ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ Ğº Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ğ±ĞµÑĞ¿ĞµÑ‡ĞµĞ½Ğ¸Ñ.',
            'ĞĞµ Ğ±Ğ¾Ğ¹Ñ‚ĞµÑÑŒ Ğ·Ğ°Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ¸ ÑƒÑ‡Ğ¸Ñ‚ÑŒÑÑ.',
            'Ğ ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ ÑƒĞ»ÑƒÑ‡ÑˆĞ°ÑÑ‚ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚.',
            'Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ - Ğ»ÑƒÑ‡ÑˆĞ¸Ğ¹ Ğ´Ñ€ÑƒĞ³ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ°.',
            'Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµÑÑ‚Ğ²Ğ¾ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¾Ğ² Ğ²ÑĞµĞ³Ğ´Ğ° Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‡ÑŒ.',
        ];

        $categories = [
            'Ğ¡Ğ¿Ğ¾Ñ€Ñ‚' => [
                'Ğ¤ÑƒÑ‚Ğ±Ğ¾Ğ»',
                'Ğ‘Ğ¾ĞºÑ',
                'ĞšĞ¸Ğ±ĞµÑ€ÑĞ¿Ğ¾Ñ€Ñ‚',
                'Ğ‘Ğ°ÑĞºĞµÑ‚Ğ±Ğ¾Ğ»',
                'Ğ’Ğ¾Ğ»ĞµĞ¹Ğ±Ğ¾Ğ»',
                'Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°-1',
                'Ğ¢ĞµĞ½Ğ½Ğ¸Ñ',
                'Ğ¥Ğ¾ĞºĞºĞµĞ¹'
            ],

            'ĞŸĞ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°' => [
                'ĞœĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°',
                'ĞŸĞ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° Ğ Ğ¾ÑÑĞ¸Ğ¸',
                'ĞŸĞ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° Ğ¡Ğ¨Ğ',
                'Ğ’Ñ‹Ğ±Ğ¾Ñ€Ñ‹',
                'ĞœĞµĞ¶Ğ´ÑƒĞ½Ğ°Ñ€Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ñ',
                'ĞšĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ñ‹ Ğ¸ ÑĞ°Ğ½ĞºÑ†Ğ¸Ğ¸',
                'Ğ“ĞµĞ¾Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°',
            ],

            'Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸' => [
                'Ğ“Ğ°Ğ´Ğ¶ĞµÑ‚Ñ‹',
                'ĞœĞ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ğµ Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸',
                'Ğ˜ÑĞºÑƒÑÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚',
                'IT-Ğ¸Ğ½Ğ´ÑƒÑÑ‚Ñ€Ğ¸Ñ',
                'ĞšĞ¸Ğ±ĞµÑ€Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ',
                'ĞšÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ²Ğ°Ğ»ÑÑ‚Ñ‹ Ğ¸ Ğ±Ğ»Ğ¾ĞºÑ‡ĞµĞ¹Ğ½',
            ],

            'Ğ­ĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸ĞºĞ°' => [
                'Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑÑ‹',
                'Ğ‘Ğ¸Ğ·Ğ½ĞµÑ',
                'Ğ˜Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸Ğ¸',
                'Ğ Ñ‹Ğ½ĞºĞ¸ Ğ¸ Ğ±Ğ¸Ñ€Ğ¶Ğ¸',
                'ĞĞµĞ´Ğ²Ğ¸Ğ¶Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ',
                'Ğ­Ğ½ĞµÑ€Ğ³ĞµÑ‚Ğ¸ĞºĞ°',
                'ĞœĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸ĞºĞ°'
            ],

            'ĞšÑƒĞ»ÑŒÑ‚ÑƒÑ€Ğ°' => [
                'ĞœÑƒĞ·Ñ‹ĞºĞ°',
                'ĞšĞ¸Ğ½Ğ¾',
                'Ğ¢ĞµĞ°Ñ‚Ñ€',
                'Ğ›Ğ¸Ñ‚ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ°',
                'Ğ˜ÑĞºÑƒÑÑÑ‚Ğ²Ğ¾',
                'Ğ’Ñ‹ÑÑ‚Ğ°Ğ²ĞºĞ¸',
                'Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ'
            ],

            'Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ' => [
                'ĞœĞµĞ´Ğ¸Ñ†Ğ¸Ğ½Ğ°',
                'Ğ¤Ğ¸Ñ‚Ğ½ĞµÑ',
                'ĞŸĞ¸Ñ‚Ğ°Ğ½Ğ¸Ğµ',
                'ĞŸÑĞ¸Ñ…Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ',
                'Ğ›Ğ°Ğ¹Ñ„Ñ…Ğ°ĞºĞ¸ Ğ´Ğ»Ñ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ'
            ],

            'ĞŸÑƒÑ‚ĞµÑˆĞµÑÑ‚Ğ²Ğ¸Ñ' => [
                'Ğ¢ÑƒÑ€Ğ¸Ğ·Ğ¼',
                'ĞÑ‚ĞµĞ»Ğ¸ Ğ¸ Ğ¾Ñ‚Ğ´Ñ‹Ñ…',
                'ĞĞ²Ğ¸Ğ°Ğ¿ĞµÑ€ĞµĞ»Ñ‘Ñ‚Ñ‹',
                'Ğ“Ğ¸Ğ´Ñ‹ Ğ¿Ğ¾ ÑÑ‚Ñ€Ğ°Ğ½Ğ°Ğ¼',
                'ĞŸÑƒÑ‚ĞµĞ²Ñ‹Ğµ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸'
            ],

            'Ğ Ğ°Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ' => [
                'ĞšĞ¸Ğ½Ğ¾ Ğ¸ ÑĞµÑ€Ğ¸Ğ°Ğ»Ñ‹',
                'Ğ¨Ğ¾Ñƒ-Ğ±Ğ¸Ğ·Ğ½ĞµÑ',
                'Ğ®Ğ¼Ğ¾Ñ€',
                'Ğ˜Ğ½Ñ‚ĞµÑ€Ğ²ÑŒÑ',
                'Ğ˜Ğ³Ñ€Ñ‹'
            ]
        ];

        foreach ($categories as $categoryName => $categoriesArray) {
            $parentCategory = Category::query()->firstOrCreate([
                'parent_id' => null,
                'name' => $categoryName
            ]);
            foreach ($categoriesArray as $category) {
                 Category::query()->firstOrCreate([
                   'parent_id' => $parentCategory->id,
                   'name' => $category
                ]);
            }
        }

        // Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ¿Ğ¾ÑÑ‚Ñ‹ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
        $users = User::all();
        $postIndex = 0;

        /** @var Collection $subCategories */
        $subCategories = Category::dontParent()->get();

        foreach ($users as $user) {
            for ($i = 1; $i <= 4; $i++) {
                $randomSubCategoryId = $subCategories->random(1)->first()->id;
                Post::create([
                    'category_id' => $randomSubCategoryId,
                    'content' => "Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ¼ĞµÑ€ {$postIndex}: " . $postMessages[$postIndex % count($postMessages)],
                    'user_id' => $user->id,
                    'created_at' => Carbon::now()->subHours($postIndex * 2),
                    'updated_at' => Carbon::now()->subHours($postIndex * 2),
                ]);
                $postIndex++;
            }
        }

        $this->command->info('âœ… Ğ£ÑĞ¿ĞµÑˆĞ½Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¾:');
        $this->command->info('   - 5 Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹');
        $this->command->info('   - 20 Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ¾ÑÑ‚Ğ¾Ğ² (Ğ¿Ğ¾ 4 Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ)');
        $this->command->info('   ğŸ“§ ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹: 111111');
        $this->command->info('   ğŸ‘‘ ĞĞ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€: admin / 111111');
    }
}
